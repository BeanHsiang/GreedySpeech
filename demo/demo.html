<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
 <head>
  <title> GreedySpeech Demo </title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf8" />
  <script type="text/javascript" src="swfobject.js"></script>
  <script type="text/javascript" src="greedyspeech.js"></script> 
  <script type="text/javascript" src="jquery-1.5.1.min.js"></script> 
  <script type="text/javascript">
  function startRecordCallback(){
	  $("#info").text("start record");
	  GreedySpeech.hide();
	  $("#btnstartRecord").attr("disabled", true);
	  $("#btnstopRecord").attr("disabled", false);
  }

  function startRecordErrorCallback(err){
      $("#info").text(err.toString());      
	  GreedySpeech.show();	 
	  GreedySpeech.set();
  }

  function stopRecordCallback(){
      $("#info").text("stop record");
	  $("#btnstartRecord").attr("disabled", false);
	  $("#btnstopRecord").attr("disabled", true);
	  $("#btnPlay").attr("disabled", false);
	  $("#btnUpload").attr("disabled", false);
  }      

  function uploadCallback()
  {
	  $("#info").text("upload success");
  }

  $(function(){
      GreedySpeech.setup({
          id:"SpeechContainer",
		  uploadUrl:"http://localhost:13810/home/audio"
	  });

	  $("#btnstartRecord").click(function(){          
          GreedySpeech.startRecord("startRecordCallback","startRecordErrorCallback");
	  });

	  $("#btnstopRecord").click(function(){
          GreedySpeech.stopRecord("stopRecordCallback");
	  });
	  
	  $("#btnPlay").click(function(){
          GreedySpeech.play();
	  });
	  /*
	  $("#btnSet").click(function(){
          GreedySpeech.show();
		  GreedySpeech.set();
	  });
      */
	  $("#btnUpload").click(function(){
          GreedySpeech.upload("uploadCallback");
	  });

      $("#btnstopRecord").attr("disabled", true);
      $("#btnPlay").attr("disabled", true);
      $("#btnUpload").attr("disabled", true);
  })      
  </script>
 </head>
 <body>
  <input type="button" id="btnstartRecord" value="开始录音" />
  <input type="button" id="btnstopRecord" value="停止录音" />	
  <input type="button" id="btnPlay" value="回放录音" />
  <input type="button" id="btnUpload" value="上传录音" />
  <!--<input type="button" id="btnSet" value="设置" />-->
  <div id="SpeechContainer">
  </div>
  <div id="info"></div>
 </body>
</html>
